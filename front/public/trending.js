(()=>{"use strict";function e(e){let t=document.createElement("section");t.classList.add("card","cardSize","shadow-lg","p-1","mx-2","rounded","bg-opaco-90","my-4","position-relative");const o=`https://media.themoviedb.org/t/p/w300_and_h450_bestv2/${e.poster_path}`,n=`https://www.themoviedb.org/movie/${e.id}/watch?translate=false&locale=MX`;let a=`<div class="sinopsis">${e.overview}</div>`;t.innerHTML=`\n      <h5 class="card-title text-center">\n        <a class="noSubrayado text-monospace" target="_blank" href="${o}">${e.title}</a>\n      </h5>\n      <div class="image-container" style="position: relative;">\n        <img class="card-img-top" src="${o}" alt="El poster de ${e.title}"/>\n        ${a}\n      </div>\n      <ul class="card-body list-group p-1 m-1">\n        <li class="list-group-item">Calificación: <strong>${parseFloat(e.vote_average.toFixed(1))}</strong></li>\n        <li class="list-group-item">Lanzamiento: <strong>${e.release_date}</strong></li>\n        <li class="list-group-item">¿Dónde ver?: <a class="noSubrayado text-monospace" target="_blank" href="${n}"><strong> CLICK AQUÍ</strong></a></li>\n        <li class="list-group-item">Ver el Trailer:<button type="button" class="btn btn-link video-btn noSubrayado text-monospace" data-toggle="modal" data-target="#videoModal" data-thevideo=""><strong>CLICK AQUÍ</strong></button></li>\n      </ul>\n    `;const i=t.querySelector(".image-container"),s=t.querySelector(".sinopsis");return s.style.display="none",i.addEventListener("click",(function(){s.style.display="none"===s.style.display?"block":"none"})),$.ajax({url:`https://api.themoviedb.org/3/movie/${e.id}/videos?language=es-US`,method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwNzI5MDJjOTNhM2EzZjc1MmNiYzQ1MzMzMDU1M2U4YyIsInN1YiI6IjY1Y2EyZWFjNDM1MDExMDE4M2ViMWYxZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.eYiUyh8VEHIV-uN868CbUPFSM_O3I3hOhRjMjtemKTE"},success:function(e){if(e&&e.results&&e.results.length>0){const o=`https://www.youtube.com/embed/${e.results[0].key}?autoplay=1`;t.querySelector(".video-btn").setAttribute("data-thevideo",o)}},error:function(e,t,o){console.error(`Error al obtener el video debido a: ${t}`,o)}}),t}let t=1;function o(){$.ajax({url:`https://api.themoviedb.org/3/trending/movie/week?language=es-US&page=${t}`,method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwNzI5MDJjOTNhM2EzZjc1MmNiYzQ1MzMzMDU1M2U4YyIsInN1YiI6IjY1Y2EyZWFjNDM1MDExMDE4M2ViMWYxZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.eYiUyh8VEHIV-uN868CbUPFSM_O3I3hOhRjMjtemKTE"},success:function(t){!function(e,t){const o=document.getElementById("cardsContainer");o.innerHTML="",e.forEach((e=>{const n=t(e);o.appendChild(n)}))}(t.results,e)},error:function(e,t,o){console.error(`Error al obtener las películas debido a: ${t}`,o)}})}document.addEventListener("DOMContentLoaded",o),document.getElementById("nextPage").addEventListener("click",(function(e){e.preventDefault(),t+=1,o(),lastPage.classList.remove("d-none")})),document.getElementById("lastPage").addEventListener("click",(function(e){t-=1,e.preventDefault(),o(),1===t&&lastPage.classList.add("d-none")})),$(document).ready((function(){$(document).on("click",".video-btn",(function(){var e=$(this).attr("data-thevideo");$("#videoModal iframe").attr("src",e),$("#videoModal").modal("show")})),$("#videoModal").on("hidden.bs.modal",(function(){$("#videoModal iframe").attr("src","")}))})),$("#video").attr("src","")})();